# ๐ Subscription Plans Form Update - ุฏููู ุงูุชุญุฏูุซ

**ุงูุชุงุฑูุฎ:** ููููุจุฑ 2025  
**ุงูุญุงูุฉ:** โ ููุชูู

---

## ๐ฏ ูุง ุชู ุชุญุฏูุซู

ุชู ุชุญุณูู ููุฑู ุฅุถุงูุฉ/ุชุนุฏูู ุฎุทุท ุงูุงุดุชุฑุงู ุจุฅุถุงูุฉ ุงูููุฒุงุช ุงูุชุงููุฉ:

### โจ ุงูููุฒุงุช ุงูุฌุฏูุฏุฉ

#### 1. **ุงุฎุชูุงุฑ Subject ูู ูุงุฆูุฉ Dropdown**
- ุจุฏูุงู ูู ุฅุฏุฎุงู Subject ID ูุฏููู
- ุงุฎุชูุงุฑ ูุจุงุดุฑ ูู ูุงุฆูุฉ ุงูููุงุฏ ุงููุชุงุญุฉ
- ุนุฑุถ ุงุณู ุงููุงุฏุฉ (Subject Name) ุจุฏูุงู ูู ุงูู ID

#### 2. **ุชุญููู ุชููุงุฆู ููู Terms**
- ุนูุฏ ุงุฎุชูุงุฑ Subjectุ ูุชู ุชุญููู ุฌููุน ุงูู Terms ุงููุฑุชุจุทุฉ ุจูุฐู ุงููุงุฏุฉ
- ุงูุชุญุฏูุซ ุงูุชููุงุฆู ููุงุฆูุฉ Terms ุจูุงุกู ุนูู Subject ุงููุฎุชุงุฑ
- ุงูุชุญููู ุงูุฃูู ููู Term ุงูุฃูู ุชููุงุฆูุงู (Autofill)

#### 3. **ุนุฑุถ ูุนูููุงุช ูุงููุฉ ูู ุงูุฌุฏูู**
- ุนุฑุถ **Subject Name** ุจุฏูุงู ูู Subject ID
- ุนุฑุถ **Term Number** ููุชุฑู ุงููุฑุชุจุท
- ุชูุณูู ุฃูุถู ููุจูุงูุงุช ุงููุนุฑูุถุฉ

#### 4. **ููุน ุงูุนูููุงุช ุบูุฑ ุงูุตุญูุญุฉ**
- ุนูุฏ ุนุฏู ุงุฎุชูุงุฑ Subjectุ ูููู ุญูู Term ููุนุทูู (Disabled)
- ูุง ูููู ุญูุธ ุฎุทุฉ ุจุฏูู ููุก ุงูุจูุงูุงุช ุงููุทููุจุฉ

---

## ๐ง ุงูุชุนุฏููุงุช ุงูุชูููุฉ

### TypeScript Component (`subscriptions.component.ts`)

#### ุงููุงุฌูุงุช ุงูุฌุฏูุฏุฉ:
```typescript
interface Subject {
  id: number;
  name: string;
  categoryId?: number;
  yearId?: number;
}

interface Term {
  id: number;
  name: string;
  termNumber: number;
  subjectId: number;
  yearId?: number;
}
```

#### ุงูุฎุตุงุฆุต ุงูุฌุฏูุฏุฉ:
```typescript
subjects: Subject[] = [];           // ูุงุฆูุฉ ุงูููุงุฏ ุงููุชุงุญุฉ
filteredTerms: Term[] = [];         // ุงูุชุฑู ุงููุฑุชุจุทุฉ ุจู Subject ุงููุฎุชุงุฑ
```

#### ุงูุฏูุงู ุงูุฌุฏูุฏุฉ:

**1. `loadSubjects()`**
- ุชุญููู ุฌููุน ุงูููุงุฏ ุงููุชุงุญุฉ ุนูุฏ ุชุญููู ุงูุตูุญุฉ
- ุงุณุชุฏุนุงุก API: `GET /api/Subjects`

**2. `onSubjectChange(subjectId: number)`**
- ูุชู ุงุณุชุฏุนุงุคูุง ุนูุฏ ุชุบููุฑ Subject
- ุชุญููู ุงูู Terms ุงููุฑุชุจุทุฉ ุจู Subject
- ุงุณุชุฏุนุงุก API: `GET /api/Terms/by-subject/{subjectId}`
- ุชุญุฏูุซ Subject Name ุชููุงุฆูุงู

**3. `getSubjectName(subjectId?: number): string`**
- ุงูุญุตูู ุนูู ุงุณู ุงููุงุฏุฉ ูู ุงูู ID
- ุชุณุชุฎุฏู ููุนุฑุถ ูู ุงูุฌุฏูู ูุงูู Modal

**4. `getTermName(termId?: number): string`**
- ุงูุญุตูู ุนูู ุงุณู ุงูุชุฑู ูู ุงูู ID
- ุชุณุชุฎุฏู ููุนุฑุถ ูู ุงูุฌุฏูู ูุงูู Modal

#### ุชุญุฏูุซุงุช ุงูุฏูุงู ุงูููุฌูุฏุฉ:

**`openAddPlanModal()`**
- ุฅุนุงุฏุฉ ุชุนููู `filteredTerms` ุนูุฏ ูุชุญ Modal ุฌุฏูุฏ

**`openEditPlanModal(plan)`**
- ุชุญููู ุงูู Terms ุนูุฏ ุชุนุฏูู ุฎุทุฉ ููุฌูุฏุฉ
- ุงุณุชุนุงุฏุฉ ุงูู Subject ูุงูู Term ุงููุฎุชุงุฑุฉ

### HTML Template (`subscriptions.component.html`)

#### ุชุญุฏูุซุงุช ุงูููุฑู:
```html
<!-- Before: Input Fields -->
<input type="number" [(ngModel)]="currentPlan.subjectId" ... />
<input type="number" [(ngModel)]="currentPlan.termId" ... />

<!-- After: Select Dropdowns -->
<select [(ngModel)]="currentPlan.subjectId" 
        (change)="onSubjectChange(currentPlan.subjectId || 0)">
  <option [value]="0">Select Subject</option>
  @for (subject of subjects; track subject.id) {
    <option [value]="subject.id">{{ subject.name }}</option>
  }
</select>

<select [(ngModel)]="currentPlan.termId" 
        [disabled]="!currentPlan.subjectId || currentPlan.subjectId === 0">
  <option [value]="0">Select Term</option>
  @for (term of filteredTerms; track term.id) {
    <option [value]="term.id">{{ term.name }} (Term {{ term.termNumber }})</option>
  }
</select>
```

#### ุชุญุฏูุซุงุช ุงูุฌุฏูู:
```html
<!-- Before: Columns -->
<th>Plan Name</th>
<th>Description</th>
<th>Price</th>
<th>Status</th>

<!-- After: Columns -->
<th>Plan Name</th>
<th>Subject</th>
<th>Term</th>
<th>Price</th>
<th>Status</th>

<!-- Row Data -->
<td>{{ plan.name }}</td>
<td>{{ getSubjectName(plan.subjectId) }}</td>
<td>{{ plan.termNumber ? 'Term ' + plan.termNumber : '-' }}</td>
<td>${{ plan.price }}</td>
```

---

## ๐ ุฎุทูุงุช ุงูุงุณุชุฎุฏุงู

### ุฅุถุงูุฉ ุฎุทุฉ ุงุดุชุฑุงู ุฌุฏูุฏุฉ:

1. ุงุถุบุท ุนูู ุฒุฑ **"Add Plan"**
2. ููุก ุงูุจูุงูุงุช ุงููุทููุจุฉ:
   - **Plan Name**: ุงุณู ุงูุฎุทุฉ
   - **Description**: ูุตู ุงูุฎุทุฉ
   - **Plan Type**: ููุน ุงูุฎุทุฉ
   - **Price**: ุงูุณุนุฑ
3. ุงุฎุชุฑ **Subject** ูู ุงููุงุฆูุฉ ุงูููุณุฏูุฉ
   - ุณุชูููุฃ ูุงุฆูุฉ ุงูู Terms ุชููุงุฆูุงู
4. ุงุฎุชุฑ **Term** ูู ุงููุงุฆูุฉ (ุณูุชู ููุก ุงูุฃูู ุชููุงุฆูุงู)
5. (ุงุฎุชูุงุฑู) ุฃุฏุฎู **Year ID** ุฅุฐุง ูุงู ูุทููุจุงู
6. ุงููุฑ **"Create"**

### ุชุนุฏูู ุฎุทุฉ ููุฌูุฏุฉ:

1. ุงุถุบุท ุนูู ุฃููููุฉ **"Edit"** ูู ุตู ุงูุฎุทุฉ
2. ุณุชูุธูุฑ ุฌููุน ุงูุจูุงูุงุช ูููุคุฉ
3. ุนูุฏ ุชุบููุฑ Subjectุ ุณูุชู ุชุญููู ุงูู Terms ุงูุฌุฏูุฏุฉ
4. ุงุถุบุท **"Update"** ูุญูุธ ุงูุชุบููุฑุงุช

---

## ๐ ุชุฏูู ุงูุนูู

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  ูุชุญ Modal ุฅุถุงูุฉ ุฎุทุฉ      โ
โโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโ
             โ
             โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  ุชุญููู ูุงุฆูุฉ ุงูููุงุฏ       โ
โ  (GET /api/Subjects)       โ
โโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโ
             โ
             โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  ุงุฎุชูุงุฑ Subject ูู Dropdownโ
โโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโ
             โ
             โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  ุชุญููู Terms ููู Subject   โ
โ  (GET /api/Terms/by-subj..)โ
โโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโ
             โ
             โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  Autofill ุฃูู Term        โ
โโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโ
             โ
             โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  ุญูุธ ุงูุฎุทุฉ                 โ
โ  (POST/PUT /api/Plans)     โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## โ ุงูุชุญูู ูู ุงูุฃุฎุทุงุก

### ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ุงููุทุจูุฉ:

1. **ูุดู ุชุญููู ุงูููุงุฏ**
   - ุนุฑุถ ุฑุณุงูุฉ ุฎุทุฃ Swal
   - ุนุฏู ุงูุณูุงุญ ุจุงููุชุงุจุนุฉ

2. **ูุดู ุชุญููู ุงูุชุฑู**
   - ุงููุณุญ ุงูุชููุงุฆู ููุงุฆูุฉ ุงูุชุฑู
   - ุชุนุทูู ุญูู Term

3. **ุจูุงูุงุช ูุงูุตุฉ**
   - ุงูุชุญูู ูู ุงูุญููู ุงููุทููุจุฉ
   - ุนุฑุถ ุฑุณุงูุฉ ุชุญุฐูุฑ

4. **Subject ุบูุฑ ูุฎุชุงุฑ**
   - ุชุนุทูู ุญูู Term
   - ุนุฏู ุชุญููู Terms

---

## ๐จ ุชุญุณููุงุช ูุงุฌูุฉ ุงููุณุชุฎุฏู

### ูุจู ุงูุชุญุฏูุซ:
- ุญููู ุฅุฏุฎุงู ูุตู ููู IDs
- ูุง ุชูุฌุฏ ูุนูููุงุช ุฅุถุงููุฉ
- ุชุฌุฑุจุฉ ูุณุชุฎุฏู ููุฎูุถุฉ

### ุจุนุฏ ุงูุชุญุฏูุซ:
- ููุงุฆู ููุณุฏูุฉ ุณููุฉ ุงูุงุณุชุฎุฏุงู
- ุนุฑุถ ุฃุณูุงุก ูุงููุฉ ุจุฏูุงู ูู IDs
- ุชุญููู ุชููุงุฆู ููู Terms
- ุชุฌุฑุจุฉ ูุณุชุฎุฏู ูุญุณููุฉ
- ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ

---

## ๐ฑ ุงูุชูุงูู

- โ ุฌููุน ุงููุชุตูุญุงุช ุงูุญุฏูุซุฉ
- โ ุงูุฃุฌูุฒุฉ ุงููุญูููุฉ
- โ Responsive Design
- โ Accessibility

---

## ๐ ุงุฎุชุจุงุฑ ุงูุชุญุฏูุซุงุช

### ุญุงูุงุช ุงูุงุฎุชุจุงุฑ:

1. **โ ุชุญููู ุงูุตูุญุฉ**
   - ุชุญููู ูุงุฆูุฉ ุงูููุงุฏ ุจูุฌุงุญ
   - ุนุฑุถ ุฌููุน ุงูุฎุทุท ุงูููุฌูุฏุฉ

2. **โ ุฅุถุงูุฉ ุฎุทุฉ ุฌุฏูุฏุฉ**
   - ูุชุญ Modal ุจุดูู ุตุญูุญ
   - ุงุฎุชูุงุฑ Subject ูุญูู Terms
   - ุญูุธ ุงูุฎุทุฉ ุจูุฌุงุญ

3. **โ ุชุนุฏูู ุฎุทุฉ**
   - ุชุญููู ุงูุจูุงูุงุช ุงูููุฌูุฏุฉ
   - ุชุญุฏูุซ Subject ูุญุฏูุซ Terms
   - ุญูุธ ุงูุชุบููุฑุงุช ุจูุฌุงุญ

4. **โ ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก**
   - ูุดู ุชุญููู ุงูููุงุฏ
   - ูุดู ุชุญููู ุงูุชุฑู
   - ุจูุงูุงุช ุบูุฑ ูุงููุฉ

---

## ๐ ุงูููุฒุงุช ุงููุณุชูุจููุฉ

- [ ] ุชุตููุฉ ุงูููุงุฏ ุจูุงุกู ุนูู ุงูุณูุฉ ุงูุฏุฑุงุณูุฉ
- [ ] ูุนุงููุฉ ุงูุฎุทุฉ ูุจู ุงูุญูุธ
- [ ] ุงุณุชูุฑุงุฏ ุฎุทุท ูู ููู Excel
- [ ] ูุณุฎ ุฎุทุฉ ููุฌูุฏุฉ
- [ ] ุฌุฏููุฉ ุชูุนูู/ุชุนุทูู ุงูุฎุทุท

---

## ๐ ุงููุณุงุนุฏุฉ ูุงูุฏุนู

ูู ุญุงูุฉ ูุฌูุฏ ูุดุงูู:

1. ุชุญูู ูู ูุญุฏุฉ ุงูุชุญูู (Browser Console) ููุฃุฎุทุงุก
2. ุชุฃูุฏ ูู ุงุชุตุงูู ุจุงูุฅูุชุฑูุช
3. ุชุญูู ูู ุฃู API ูุนูู ุจุดูู ุตุญูุญ
4. ุงูุณุญ ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุชุฉ ูููุชุตูุญ

---

**ุงูุชุญุฏูุซ ููุชูู ุจูุฌุงุญ! โ**

**ุงููููุงุช ุงููุนุฏูุฉ:**
- `subscriptions.component.ts` - ุฅุถุงูุฉ ุงูุฏูุงู ุงูุฌุฏูุฏุฉ
- `subscriptions.component.html` - ุชุญุฏูุซ ุงูููุฑู ูุงูุฌุฏูู

**ุจุฏูู ุฃุฎุทุงุก ุฃู ุชุญุฐูุฑุงุช!**

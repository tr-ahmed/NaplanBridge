<div class="min-h-screen bg-gray-100">
  <!-- Header -->
  <header class="bg-white shadow sticky top-0 z-40">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex justify-between items-center py-4">
        <div class="flex items-center space-x-4">
          <button (click)="toggleMobileSidebar()" class="lg:hidden p-2 rounded-md text-gray-600 hover:bg-gray-100">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
            </svg>
          </button>
          <h1 class="text-2xl font-bold text-gray-900">ğŸ“š Teacher Content Management</h1>
        </div>

        <div class="flex items-center space-x-4">
          <button (click)="refreshContent()"
                  class="p-2 rounded-lg text-gray-600 hover:bg-gray-100 transition"
                  [disabled]="loading()">
            ğŸ”„ Refresh
          </button>

          <button (click)="switchTab('create')"
                  class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition">
            â• Create
          </button>
        </div>
      </div>

      <!-- Navigation Tabs -->
      <div class="flex space-x-1 border-t border-gray-200 pt-4 overflow-x-auto">
        <button *ngFor="let tab of tabs"
                (click)="switchTab(tab.id)"
                class="px-4 py-2 font-medium text-sm rounded-t-lg transition whitespace-nowrap"
                [class.bg-white]="activeTab() === tab.id"
                [class.text-blue-600]="activeTab() === tab.id"
                [class.border-b-2]="activeTab() === tab.id"
                [class.border-blue-600]="activeTab() === tab.id"
                [class.text-gray-600]="activeTab() !== tab.id"
                [class.hover:text-gray-900]="activeTab() !== tab.id">
          <span class="mr-2">{{ tab.icon }}</span>
          {{ tab.label }}
          <span *ngIf="tab.badge" class="ml-2 bg-red-500 text-white text-xs rounded-full px-2">{{ tab.badge }}</span>
        </button>
      </div>
    </div>
  </header>
  <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <!-- Loading State -->
    <div *ngIf="loading()" class="flex items-center justify-center py-12">
      <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"></div>
      <span class="ml-3 text-gray-600">Loading...</span>
    </div>

    <!-- Dashboard Tab -->
    <div *ngIf="activeTab() === 'dashboard' && !loading()">
      <app-teacher-dashboard
        [stats]="stats"
        [subjects]="authorizedSubjects"
        [selectedSubject]="selectedSubject"
        (onSelectSubject)="selectSubject($event)">
      </app-teacher-dashboard>
    </div>

    <!-- My Content Tab -->
    <div *ngIf="activeTab() === 'my-content' && !loading()">
      <app-my-content-list
        [content]="allContent"
        (onEdit)="showContentHistory($event)"
        (onDelete)="onContentDeleted()"
        (onSubmit)="onContentSubmitted()"
        (onViewHistory)="showContentHistory($event)">
      </app-my-content-list>
    </div>

    <!-- Create Tab -->
    <div *ngIf="activeTab() === 'create' && !loading()">
      <div class="bg-white rounded-lg shadow p-8 text-center">
        <div class="text-6xl mb-4">ğŸ“</div>
        <h2 class="text-2xl font-bold text-gray-900 mb-4">Create New Content</h2>
        <p class="text-gray-600 mb-6 max-w-md mx-auto">
          Start creating your educational content. Choose a content type and fill in the details.
          Your content will be submitted for admin approval.
        </p>
        <button (click)="showCreateModal.set(true)"
                class="px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition inline-block">
          â• Start Creating
        </button>
      </div>
    </div>

    <!-- History Tab -->
    <div *ngIf="activeTab() === 'history' && !loading()">
      <div class="bg-white rounded-lg shadow p-8">
        <h2 class="text-xl font-bold text-gray-900 mb-6">ğŸ“‹ Recent Activity</h2>
        <p class="text-gray-600">Select a content item from "My Content" to view its approval history.</p>
      </div>
    </div>
  </main>

  <!-- Content Creation Modal -->
  <app-content-creation-wizard
    [isOpen]="showCreateModal"
    (onClose)="closeCreateModal()"
    (onSubmit)="onContentCreated($event)">
  </app-content-creation-wizard>

  <!-- Approval History Modal -->
  <app-approval-history
    [isOpen]="showHistoryModal"
    [content]="selectedContentForHistory"
    (onClose)="closeHistoryModal()">
  </app-approval-history>
</div>

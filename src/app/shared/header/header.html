
<header class="bg-white shadow-lg fixed top-0 left-0 w-full z-50">
  <!-- Full width, minimal padding -->
  <div class="w-full px-2">
    <nav class="flex justify-between items-center py-2 min-h-[4rem]">
      
      <!-- Logo (far left) -->
      <div class="flex-shrink-0 order-1">
        <a routerLink="/" class="flex items-center text-decoration-none">
          <img src="assets/img/logo.png" alt="NAPLAN Bridge Logo" class="w-auto mr-3 h-14"
            onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
          <div class="text-center" style="display: none;">
            <span class="text-xl font-bold text-primary-500 leading-none">NAPLAN</span>
            <span class="text-sm text-gray-600 font-medium -mt-1 block">Bridge</span>
          </div>
        </a>
      </div>

      <!-- Navigation (center) -->
      <ul class="hidden md:flex space-x-8 list-none order-2 items-center">
        @for (item of navigationItems; track item.route) {
          @if (item.label === 'Plans') {
            <li class="relative group">
              <button class="text-gray-700 hover:text-primary-500 hover:bg-blue-50 px-3 py-2 rounded-lg font-medium transition-all duration-300 flex items-center gap-1">
                {{ item.label }}
                <svg class="w-4 h-4 transform group-hover:rotate-180 transition-transform duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
                </svg>
              </button>
              <ul class="absolute left-0 top-full mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 py-2 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50">
                <li><a routerLink="/plans/basic" class="block px-4 py-2 hover:bg-blue-50 hover:text-primary-500">Basic Plan</a></li>
                <li><a routerLink="/plans/premium" class="block px-4 py-2 hover:bg-blue-50 hover:text-primary-500">Premium Plan</a></li>
                <li><a routerLink="/plans/enterprise" class="block px-4 py-2 hover:bg-blue-50 hover:text-primary-500">Enterprise Plan</a></li>
                <li><a routerLink="/plans/compare" class="block px-4 py-2 hover:bg-blue-50 hover:text-primary-500">Compare Plans</a></li>
              </ul>
            </li>
          } @else if (item.label === 'Courses') {
            <li class="relative group">
              <button class="text-gray-700 hover:text-primary-500 hover:bg-blue-50 px-3 py-2 rounded-lg font-medium transition-all duration-300 flex items-center gap-1">
                {{ item.label }}
                <svg class="w-4 h-4 transform group-hover:rotate-180 transition-transform duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
                </svg>
              </button>
              <ul class="absolute left-0 top-full mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 py-2 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50">
                <li><a routerLink="/courses/mathematics" class="block px-4 py-2 hover:bg-blue-50 hover:text-primary-500">Mathematics</a></li>
                <li><a routerLink="/courses/reading" class="block px-4 py-2 hover:bg-blue-50 hover:text-primary-500">Reading</a></li>
                <li><a routerLink="/courses/writing" class="block px-4 py-2 hover:bg-blue-50 hover:text-primary-500">Writing</a></li>
                <li><a routerLink="/courses/language" class="block px-4 py-2 hover:bg-blue-50 hover:text-primary-500">Language Conventions</a></li>
                <li><a routerLink="/courses/all" class="block px-4 py-2 hover:bg-blue-50 hover:text-primary-500 border-t border-gray-100 mt-1 pt-3">View All Courses</a></li>
              </ul>
            </li>
          } @else {
            <li>
              <a [routerLink]="item.route" routerLinkActive="text-primary-500 bg-blue-50 font-semibold" [routerLinkActiveOptions]="{ exact: item.route === '/' }" class="px-3 py-2 rounded-lg font-medium transition-all duration-300 no-underline hover:text-primary-500 hover:bg-blue-50">
                {{ item.label }}
              </a>
            </li>
          }
        }
      </ul>

      <!-- Buttons (far right) -->
      <div class="flex items-center space-x-4 order-3">
        @if (isLoggedIn) {
          <button routerLink="/add-student" class="hidden md:block bg-primary-500 hover:bg-primary-600 text-white px-6 py-2 rounded-lg font-semibold" (click)="navigateToAddStudent()">
            Add Student
          </button>
          <div class="hidden md:flex items-center space-x-3">
            @if (userName) {
              <span class="text-gray-700 font-medium">Welcome, {{ userName }}</span>
            }
            <button (click)="handleLogout()" class="bg-red-500 hover:bg-red-600 text-white px-6 py-2 rounded-lg font-semibold">
              Logout
            </button>
          </div>
        } @else {
          @if (isLoginPage) {
            <a routerLink="/auth/register" class="hidden md:block bg-primary-500 hover:bg-primary-600 text-white px-6 py-2 rounded-lg font-semibold">
              Register
            </a>
          } @else {
            <a routerLink="/auth/login" class="hidden md:block bg-primary-500 hover:bg-primary-600 text-white px-6 py-2 rounded-lg font-semibold">
              Login
            </a>
          }
        }

        <!-- Mobile toggle button -->
        <button class="md:hidden flex flex-col space-y-1 p-2" (click)="toggleMobileMenu()" [class.active]="isMobileMenuOpen" aria-label="Toggle navigation">
          <span class="block w-6 h-0.5 bg-gray-600 transition-transform duration-300" [class.rotate-45]="isMobileMenuOpen" [class.translate-y-1.5]="isMobileMenuOpen"></span>
          <span class="block w-6 h-0.5 bg-gray-600 transition-opacity duration-300" [class.opacity-0]="isMobileMenuOpen"></span>
          <span class="block w-6 h-0.5 bg-gray-600 transition-transform duration-300" [class.-rotate-45]="isMobileMenuOpen" [class.-translate-y-1.5]="isMobileMenuOpen"></span>
        </button>
      </div>
    </nav>
  </div>

  <!-- Mobile Menu (shows only on small screens) -->
  <div
    class="md:hidden absolute top-full left-0 w-full bg-white shadow-lg border-t border-gray-200 z-40 transition-all duration-300"
    [class.hidden]="!isMobileMenuOpen"
  >
    <ul class="flex flex-col py-4 space-y-2">
      @for (item of navigationItems; track item.route) {
        <li>
          <a [routerLink]="item.route"
             (click)="toggleMobileMenu()"
             class="block px-6 py-2 text-gray-700 hover:bg-blue-50 hover:text-primary-500 font-medium transition-all duration-200">
            {{ item.label }}
          </a>
        </li>
      }
      @if (isLoggedIn) {
        <li>
          <a routerLink="/add-student" (click)="toggleMobileMenu()" class="block px-6 py-2 text-primary-500 font-semibold">
            Add Student
          </a>
        </li>
        <li>
          <button (click)="handleLogout(); toggleMobileMenu()" class="block w-full text-left px-6 py-2 text-red-500 font-semibold">
            Logout
          </button>
        </li>
      } @else {
        <li>
          <a routerLink="/auth/login" (click)="toggleMobileMenu()" class="block px-6 py-2 text-primary-500 font-semibold">
            Login
          </a>
        </li>
        <li>
          <a routerLink="/auth/register" (click)="toggleMobileMenu()" class="block px-6 py-2 text-primary-500 font-semibold">
            Register
          </a>
        </li>
      }
    </ul>
  </div>
</header>

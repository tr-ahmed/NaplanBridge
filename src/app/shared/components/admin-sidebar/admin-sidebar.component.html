<!-- Mobile Menu Button (Fixed) -->
<button 
  (click)="toggleSidebar()"
  class="lg:hidden fixed top-4 left-4 z-50 bg-blue-600 text-white p-3 rounded-lg shadow-lg hover:bg-blue-700 transition-all">
  <i class="fas fa-bars text-xl"></i>
</button>

<!-- Overlay -->
@if (isOpen()) {
  <div 
    class="fixed inset-0 bg-black bg-opacity-50 z-40 lg:hidden"
    (click)="closeSidebar()">
  </div>
}

<!-- Sidebar -->
<aside 
  class="sidebar fixed lg:static top-0 left-0 h-full lg:h-screen w-72 transform transition-transform duration-300 ease-in-out z-50 overflow-y-auto"
  [class.collapsed]="collapsed"
  [class.-translate-x-full]="!isOpen()"
  [class.translate-x-0]="isOpen()"
  [class.lg:translate-x-0]="true"
  id="sidebar"
  style="background:linear-gradient(135deg,#1e293b 0%,#2563eb 100%);box-shadow:0 8px 32px rgba(31,38,135,.37);border-top-right-radius:2rem;border-bottom-right-radius:2rem;">
  
  <!-- Close Button (Mobile Only) -->
  <button 
    (click)="closeSidebar()"
    class="lg:hidden absolute top-4 right-4 text-white hover:text-gray-300 transition-colors">
    <i class="fas fa-times text-2xl"></i>
  </button>

  <div class="sidebar-logo d-flex align-items-center py-4 px-3">
    <div class="me-3" style="background:rgba(255,255,255,0.2);width:48px;height:48px;"
      class="rounded-circle d-flex align-items-center justify-content-center shadow">
      <span class="fw-bold fs-4 text-blue-700">N</span>
    </div>
    <div class="fw-bold fs-5 text-white">NAPLAN<span class="text-warning">Bridge</span></div>
  </div>
  <nav class="sidebar-nav mt-4">
    <!-- Content Management -->
    <a routerLink="/admin/content"
      routerLinkActive="active"
      (click)="closeSidebar()"
      [routerLinkActiveOptions]="{exact: false}"
      class="nav-link d-flex align-items-center gap-2 px-4 py-3 rounded-lg mb-2 transition-all hover:bg-white/10 text-white">
      <i class="fas fa-book"></i>
      <span>Content Management</span>
    </a>

    <!-- Exams Management -->
    <a routerLink="/admin/exams"
      routerLinkActive="active"
      (click)="closeSidebar()"
      [routerLinkActiveOptions]="{exact: false}"
      class="nav-link d-flex align-items-center gap-2 px-4 py-3 rounded-lg mb-2 transition-all hover:bg-white/10 text-white">
      <i class="fas fa-file-alt"></i>
      <span>Exams Management</span>
    </a>

    <!-- User Management -->
    <a routerLink="/admin/users"
      routerLinkActive="active"
      (click)="closeSidebar()"
      [routerLinkActiveOptions]="{exact: false}"
      class="nav-link d-flex align-items-center gap-2 px-4 py-3 rounded-lg mb-2 transition-all hover:bg-white/10 text-white">
      <i class="fas fa-users"></i>
      <span>User Management</span>
    </a>

    <!-- Teacher Management Section -->
    <div class="px-4 py-2 mt-3">
      <small class="text-white/50 fw-semibold">TEACHER MANAGEMENT</small>
    </div>

    <a routerLink="/admin/teacher-permissions"
      routerLinkActive="active"
      (click)="closeSidebar()"
      [routerLinkActiveOptions]="{exact: false}"
      class="nav-link d-flex align-items-center gap-2 px-4 py-3 rounded-lg mb-2 transition-all hover:bg-white/10 text-white">
      <i class="fas fa-shield-alt"></i>
      <span>Teacher Permissions</span>
    </a>

    <!-- Subscriptions & Billing -->
    <a routerLink="/admin/subscriptions"
      routerLinkActive="active"
      (click)="closeSidebar()"
      [routerLinkActiveOptions]="{exact: false}"
      class="nav-link d-flex align-items-center gap-2 px-4 py-3 rounded-lg mb-2 transition-all hover:bg-white/10 text-white">
      <i class="fas fa-credit-card"></i>
      <span>Subscriptions & Billing</span>
    </a>

    <a routerLink="/admin/financial-reports"
      routerLinkActive="active"
      (click)="closeSidebar()"
      [routerLinkActiveOptions]="{exact: false}"
      class="nav-link d-flex align-items-center gap-2 px-4 py-3 rounded-lg mb-2 transition-all hover:bg-white/10 text-white">
      <i class="fas fa-dollar-sign"></i>
      <span>Financial Reports</span>
    </a>

    <!-- Settings Section -->
    <div class="px-4 py-2 mt-3">
      <small class="text-white/50 fw-semibold">SETTINGS</small>
    </div>

    <a routerLink="/admin/templates"
      routerLinkActive="active"
      (click)="closeSidebar()"
      [routerLinkActiveOptions]="{exact: false}"
      class="nav-link d-flex align-items-center gap-2 px-4 py-3 rounded-lg mb-2 transition-all hover:bg-white/10 text-white">
      <i class="fas fa-envelope-open-text"></i>
      <span>Notification Templates</span>
    </a>
  </nav>
  
  <!-- Profile Section -->
  <div class="sidebar-profile mt-auto px-4 py-4 border-top border-white/10">
    <div class="d-flex align-items-center gap-3 cursor-pointer" 
      (click)="navigateToProfile(); closeSidebar()" 
      [style.opacity]="profileHovered() ? '0.8' : '1'" 
      (mouseenter)="profileHovered.set(true)" 
      (mouseleave)="profileHovered.set(false)">
      <img 
        [src]="userAvatar" 
        [alt]="userName" 
        class="rounded-circle shadow-sm object-cover" 
        width="48" 
        height="48"
        style="border: 2px solid rgba(96, 165, 250, 0.5);">
      <div>
        <div class="fw-semibold text-white">{{ userName }}</div>
        <small class="text-white-50">{{ userRole }}</small>
      </div>
    </div>
    <a (click)="handleLogout(); closeSidebar()" 
      class="d-block mt-3 text-white-50 small cursor-pointer hover:text-white transition-colors">
      <i class="fas fa-sign-out-alt me-2"></i>Logout
    </a>
  </div>
</aside>
